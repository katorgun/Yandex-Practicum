
# Технологический процесс
[Скачать данные](https://drive.google.com/drive/folders/1QYxfPTfFuLHCel-wpIhfMFIJhF-9iNXf?usp=drive_link)

Как золото получают из руды? Изучите внимательно стадии процесса.

Когда работа руды проходит первичную обработку, получается аромбленная смесь. Её отправляют на флотацию (обогащение) и декантацию остатку.

![Схема технологического процесса](https://github.com/katorgun/Yandex-Practicum/assets/49516584/4b9a8ea7-72e6-4db0-871c-45123aed0208)

Описание каждого этапа:

1. Флотация

   Во флотационную установку подается смесь золотосодержащей руды. После обогащения получается черновой концентрат и «отвальные хвосты», то есть остатки продукта с низкой концентрацией ценных металлов.

   На стабильность этого процесса влияет историческое и неотъемлемое физико-химическое состояние флотационной пульпы (смесь твердых частиц и жидкости).

2. Очистка

   Черновой концентрат проходит две очистки. На выходе получается финальный концентрат и новые отвальные хвосты.

## Описание данных

### Технологический процесс

- `Rougher feed` — исходное сырье
- `Rougher additions` (или reagent additions) — флотационные реагенты: 
  - Xanthate, 
  - Sulphate, 
  - Depressant
    - где:
      - Xanthate — ксантогенат (промотер, или активатор флотации);
      - Sulphate — сульфат (на данном производственном этапе используется силикат натрия);
      - Depressant — депрессант (силикат натрия).
- `Rougher process` (отвальные хвосты) — флотационная установка
- `Rougher tails` — отвальные хвосты
- `Float banks` — флотационная установка
- `Cleaner process` — очистка
- `Rougher Au` — черновой концентрат золота
- `Final Au` — финальный концентрат золота

## Параметры этапов

- `air_amount` — объём воздуха
- `fluid_levels` — уровень жидкости
- `feed_size` — размер гранул сырья
- `feed_rate` — скорость подачи

## Наименование признаков

Наименование признаков должно быть такое:

`[brand]_[run_number].[parameter]_[processing_stage]`

Примеры:
- `rougher_input_feed_sg`
- `rougher` — флотация
- `primary_cleaner` — первичная очистка
- `secondary_cleaner` — вторичная очистка
- `final` — финальные характеристики

### Возможные значения для блока `[brand]`:

- `rougher` — флотация
- `primary_cleaner` — первичная очистка
- `secondary_cleaner` — вторичная очистка
- `final` — финальные характеристики

### Возможные значения для блока `[run_number].[parameter]`:

- `input` — параметры сырья
- `output` — параметры продукта
- `state` — параметры, характеризующие текущее состояние стана
- `calculation` — расчётные характеристики

## Расчёт эффективности

Вам нужно сформировать процесс восстановления золота из золотосодержащего сырья.

Эффективность обогащения рассчитывается по формуле:
![recovery](https://github.com/katorgun/Yandex-Practicum/assets/49516584/4d67f2df-40bd-4a36-9be3-0660b3aefe28)

## Параметры продукта

- `C` — доля золота в концентрате после флотации/очистки;
- `F` — доля золота в сырье/концентрате до флотации/очистки;
- `T` — доля золота в отвальных хвостах после флотации/очистки.

Для прогноза качественного анализа нужно найти долю золота в концентратах и хвостах. При этом важен не только финансовый продукт, но и черновой концентрат.

## Метрика качества

Для решения задачи введём новую метрику качества — sMAPE (симметричное среднее абсолютное процентное отклонение).

Она похожа на MAE, но выражается не в абсолютных величинах, а в относительных. Почему симметричная? Она одинаково учитывает масштабы и целевого признака, и предсказания.

Метрика sMAPE вычисляется так:
![SMAPE](https://github.com/katorgun/Yandex-Practicum/assets/49516584/b9c877d7-65a8-456f-aa25-e556e90bccab)

Обозначения:

![Y](https://github.com/katorgun/Yandex-Practicum/assets/49516584/735c1e89-e424-41ca-82e4-f6aff9038bbb)
- Значение целевого признака для объекта с порядковым номером i в выборке, на которой измеряется качество.

![Y hat](https://github.com/katorgun/Yandex-Practicum/assets/49516584/8140d0ec-a39e-4ab7-b993-93d16e92e3e1)
- Значение предсказания для объекта с порядковым номером i, например, в тестовой выборке.

![N](https://github.com/katorgun/Yandex-Practicum/assets/49516584/1c276254-4335-4c51-9595-c6c5c7b3a60e)
- Количество объектов в выборке.

![SUM N](https://github.com/katorgun/Yandex-Practicum/assets/49516584/6b3f4a78-fae3-467e-9f1d-2cc5152b5c2b)
- Суммирование по всем объектам выборки (i меняется от 1 до N).

## Эффективность обогащения

Необходимо спрогнозировать сразу две величины:

1. Эффективность обогащения чернового концентрата `rougher.output.recovery`;
2. Эффективность обогащения финального концентрата `final.output.recovery`.

Итоговая метрика складывается из двух величин:

![SMAPE TOTAL](https://github.com/katorgun/Yandex-Practicum/assets/49516584/36095a79-3e14-481d-9d91-030465beea49)

